---
import { getMerchantServices } from '@acme/db-api';
import { ctx } from '~/ctx';
import { getServiceHref } from '~/util/getServiceHref';
import Card from './Card.astro';

interface Props {
    merchant_id: number;
}

const { merchant_id } = Astro.props;

const services = await getMerchantServices({
    merchant_id,
    columns: { service_id: true, name: true, description: true },
    ctx,
});
---

<ul role='list' class='grid-cols-autofit grid gap-8 p-0'>
    {
        services.map(service => (
            <Card
                href={getServiceHref({ merchant_id, service_name: service.name })}
                title={service.name}
                body={service.description ?? `We do ${service.name.toLowerCase()}.`}
            />
        ))
    }
</ul>
